<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Investment & Profit Summary</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
</head>
<body>
  <header class="mb-4 bg-dark text-white text-center py-3">
    <h1>Investment & Profit Summary</h1>
  </header>

  <div class="container my-4">
    <div class="alert alert-info">
      This report summarizes how much each investor has contributed
      (receipts to <strong>Loans payable — Name</strong>), how much
      principal has been repaid, how much profit has been paid
      (payments to <strong>Profit payable / Dividend payable — Name</strong>),
      and compares the computed principal balance with the current
      Loans payable balance.
    </div>

    <div class="card">
      <div class="card-header text-center fw-bold">
        Investor Investment & Profit Summary
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-bordered table-hover align-middle">
            <thead class="table-dark">
              <tr>
                <th>Investor Name</th>
                <th class="text-end">Total Received (Principal)</th>
                <th>First Receipt Date</th>
                <th>Last Receipt Date</th>
                <th class="text-end">Principal Repaid</th>
                <th class="text-end">Computed Principal Balance</th>
                <th class="text-end">Current Balance (Loans payable)</th>
                <th class="text-center">Balance Match</th>
                <th class="text-end">Profit Paid</th>
              </tr>
            </thead>
            <tbody>
              {% for inv in investors %}
              <tr>
                <td class="text-start">{{ inv.name }}</td>
                <td class="text-end">{{ format_currency(inv.total_received) }}</td>
                <td>
                  {% if inv.first_receipt_date %}
                    {{ inv.first_receipt_date.strftime('%Y-%m-%d') }}
                  {% else %}
                    -
                  {% endif %}
                </td>
                <td>
                  {% if inv.last_receipt_date %}
                    {{ inv.last_receipt_date.strftime('%Y-%m-%d') }}
                  {% else %}
                    -
                  {% endif %}
                </td>
                <td class="text-end">{{ format_currency(inv.principal_repaid) }}</td>
                <td class="text-end">{{ format_currency(inv.computed_balance) }}</td>
                <td class="text-end">{{ format_currency(inv.current_balance) }}</td>
                <td class="text-center">
                  {% if inv.balance_match %}
                    ✓
                  {% else %}
                    ✗
                  {% endif %}
                </td>
                <td class="text-end">{{ format_currency(inv.profit_paid) }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="mt-3">
      <a href="{{ url_for('home') }}" class="btn btn-secondary btn-sm">Back to Dashboard</a>
    </div>
  </div>

  <footer class="bg-dark text-white text-center py-2 mt-4">
    <small>&copy; 2025 Investor Management System</small>
  </footer>
</body>
</html>

